#-*- mode:snakemake -*-
"""Custom reference genomes
"""
CUSTOM_URL = join(config.get('winecellar', {}).get('url', ''), 'custom_reference')

rule custom_genome:
    params:
        url = join(CUSTOM_URL, '{organism}', '{assembly}', 'fasta', 'genome.fa'),
        log = join(CUSTOM_URL, '{organism}', '{assembly}', 'logs', 'genome.log'),
        proxy = config.get('proxy', {}).get('wget', '')
    output:
        genome = join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'fasta', 'genome.fa')
    threads: 
        24
    log:
        join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'logs', 'genome.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output.genome}
        wget {params.proxy} -O- {params.log} > {log}
        """

rule custom_gff:
    params:
        url = join(CUSTOM_URL, '{organism}', '{assembly}', 'anno', 'genes.gff'),
        log = join(CUSTOM_URL, '{organism}', '{assembly}', 'logs', 'gff.log'),
        proxy = config.get('proxy', {}).get('wget', '')
    output:
        gff = join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'anno', 'genes.gff')
    threads: 
        24
    log:
        join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'logs', 'gff.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output.gff}
        wget {params.proxy} -O- {params.log} > {log}
        """

rule custom_gtf:
    params:
        url = join(CUSTOM_URL, '{organism}', '{assembly}', 'anno', 'genes.gtf'),
        log = join(CUSTOM_URL, '{organism}', '{assembly}', 'logs', 'gtf.log'),
        proxy = config.get('proxy', {}).get('wget', '')
    output:
        gtf = join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'anno', 'genes.gtf')
    threads: 
        24
    log:
        join(EXT_DIR, 'custom_reference', '{organism}', '{assembly}', 'logs', 'gtf.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output.gtf}
        wget {params.proxy} -O- {params.log} > {log}
        """


    
