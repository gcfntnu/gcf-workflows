#-*- mode:snakemake -*-
"""OPENGENE downloads. http://opengene.org/
"""

rule opengene_sarscov2_kmer:
    output:
        join(EXT_DIR, 'opengene', 'SARS-CoV-2.kmer.fa')
    params:
        proxy = config.get('proxy', {}).get('wget', ''),
        url = 'http://opengene.org/fastv/data/SARS-CoV-2.kmer.fa'
    log:
        join(EXT_DIR, 'opengene', 'logs', 'kmer.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output}
        echo "OpenGene sars-cov2-kmer,NA,{params.url},`date -I`" > {log}
        """

rule opengene_sarscov2_genome:
    output:
        join(EXT_DIR, 'opengene', 'SARS-CoV-2.genomes.fa')
    params:
        proxy = config.get('proxy', {}).get('wget', ''),
        url = 'http://opengene.org/fastv/data/SARS-CoV-2.genomes.fa'
    log:
        join(EXT_DIR, 'opengene', 'logs', 'genomes.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output}
        echo "OpenGene sars-cov2-genomes,NA,{params.url},`date -I`" > {log}
        """

rule opengene_microbial_kmer:
    output:
        join(EXT_DIR, 'opengene', 'microbial.kc.fasta.gz')
    params:
        proxy = config.get('proxy', {}).get('wget', ''),
        url = 'http://opengene.org/microbial.kc.fasta.gz'
    log:
        join(EXT_DIR, 'opengene', 'logs', 'microbial.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output}
        echo "OpenGene microbial,NA,{params.url},`date -I`" > {log}
        """


rule opengene_viral_kmer:
    output:
        join(EXT_DIR, 'opengene', 'viral.kc.fasta.gz')
    params:
        proxy = config.get('proxy', {}).get('wget', ''),
        url = 'http://opengene.org/viral.kc.fasta.gz'
    log:
        join(EXT_DIR, 'opengene', 'logs', 'viral.log')
    shell:
        """
        wget {params.proxy} -O- {params.url} > {output}
        echo "OpenGene viral,NA,{params.url},`date -I`" > {log}
        """
